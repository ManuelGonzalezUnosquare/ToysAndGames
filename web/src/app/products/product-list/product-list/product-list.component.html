<div class="component-container">
  <mat-toolbar
    role="heading"
    class="mat-toolbar page-header mat-toolbar-single-row"
  >
    <h1>Products</h1>
    <div class="desktop-menu">
      <button
        mat-flat-button=""
        color="primary"
	(click)="openDialog()"
        class="mat-flat-button mat-button-base"
      >
        <span class="mat-button-wrapper">New</span>
        <span matripple="" class="mat-ripple mat-button-ripple"></span>
        <span class="mat-button-focus-overlay"></span>
      </button>
    </div>
  </mat-toolbar>
  <mat-card>
    <div class="filter-section">
      <mat-form-field class="w-75" appearance="fill">
        <mat-label>Search ...</mat-label>
        <input
          matInput
          type="text"
          class="w-100"
          [(ngModel)]="search.hint"
          (keyup)="searchProducts()"
          autocomplete="off"
        />
        <button
          matSuffix
          mat-icon-button
          aria-label="Clear"
          (click)="clearSearch()"
        >
          <mat-icon>close</mat-icon>
        </button>
      </mat-form-field>
    </div>
    <div class="desktop-view">
      <table mat-table [dataSource]="dataSource" class="table">
        <!-- Name Column -->
        <ng-container matColumnDef="name" class="mat-column-name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let element" class="text-capitalize">
            {{element.name}}
          </td>
        </ng-container>
        <!-- Price Column -->
        <ng-container matColumnDef="price" class="mat-column-price">
          <th mat-header-cell *matHeaderCellDef>Price</th>
          <td mat-cell *matCellDef="let element" class="text-capitalize">
            {{element.price | currency}}
          </td>
        </ng-container>
        <!-- Actions Column -->
        <ng-container matColumnDef="actions" class="mat-column-actions">
          <th mat-header-cell *matHeaderCellDef>Actions</th>
          <td mat-cell *matCellDef="let row">
            <button
              mat-button
              color="primary"
              title="Edit"
              [routerLink]="['/company/',row.guid]"
            >
              <mat-icon>edit</mat-icon>
            </button>
            <button
              mat-button
              color="primary"
              title="Delete"
              [routerLink]="['/company/',row.guid,'delete']"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>
    <div class="mobile-view">
      <mat-nav-list>
        <mat-list-item *ngFor="let product of products">
          <a
            matLine
            href="#"
            appStopPropagation
            class="d-flex justify-content-between align-items-center"
          >
            <div>
              <p class="m-0">{{product.name}}</p>
            </div>
            <mat-icon>arrow_forward_ios</mat-icon>
          </a>
        </mat-list-item>
      </mat-nav-list>
    </div>

    <mat-paginator
      [length]="search.totalNumberOfRecords"
      [pageSize]="search.perPage"
      (page)="load($event)"
      [pageSizeOptions]="[1,5,10]"
    >
    </mat-paginator>
  </mat-card>

  <div class="floating-mobile-menu">
    <button mat-mini-fab color="accent" [routerLink]="['/product']">
      <mat-icon>add</mat-icon>
    </button>
  </div>
</div>
