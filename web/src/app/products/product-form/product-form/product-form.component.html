<div class="component-container">
  <mat-toolbar role="heading" class="mat-toolbar page-header mat-toolbar-single-row">
    <h1>New Product</h1>
  </mat-toolbar>
  <mat-card>
    <form [formGroup]="form" (ngSubmit)="submit()" class="form">
      <mat-form-field matInput appearance="legacy">
        <mat-label>Company</mat-label>
        <input
          type="text"
          placeholder="Start typing to search companies."
          aria-label="Company"
          matInput
          (keyup)="searchCompany($event)"
          formControlName="companyGuid"
          [matAutocomplete]="auto"
        />
        <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete" [displayWith]="displayFn.bind(this)">
          <mat-option *ngFor="let option of companyResults | async" [value]="option"> {{option.name}} </mat-option>
        </mat-autocomplete>
      </mat-form-field>

      <mat-form-field class="form-element">
        <input matInput placeholder="Product name..." formControlName="name" />
        <mat-error *ngIf="f.name.invalid && submitted">
          <span *ngIf="f.name.errors && f.name.errors.required">This field is requireeeeedd.</span>
        </mat-error>
      </mat-form-field>
      <mat-form-field class="form-element">
        <input matInput placeholder="Product description" formControlName="description" />
      </mat-form-field>
      <mat-form-field class="form-element">
        <input matInput placeholder="Age Restriction" formControlName="ageRestriction" type="number" />
      </mat-form-field>
      <mat-form-field class="form-element">
        <input matInput placeholder="Price" formControlName="price" />
      </mat-form-field>
      <button class="mat-raised-button" color="warn" type="button" (click)="openImageDialog()">Upload file</button>
      <mat-icon>check</mat-icon>
      <div class="form-element">
        <button mat-raised-button color="primary" type="submit" class="button" [disabled]="!form.valid">Submit Form</button>
      </div>
    </form>
  </mat-card>
</div>
